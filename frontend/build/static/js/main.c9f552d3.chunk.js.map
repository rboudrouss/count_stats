{"version":3,"sources":["api/index.ts","components/Cards/Cards.tsx","components/Chart/Chart.tsx","components/UserPicker/UserPicker.tsx","components/UserCard/UserCard.tsx","components/UserList/UserList.tsx","pages/MainPage/MainPage.tsx","pages/ListPage/ListPage.tsx","pages/UserPage/UserPage.tsx","App.tsx","index.tsx","components/Cards/Cards.module.css","components/UserList/UserList.module.css","pages/MainPage/MainPage.module.css","components/Chart/Chart.module.css","components/UserPicker/UserPicker.module.css"],"names":["makefunc","url","args","a","api_url","Object","entries","key","value","console","log","axios","get","response","data","getMsgInter","getUsers","Cards","props","users","className","styles","container","Grid","spacing","justify","user","top","cx","card","top1","top2","top3","Chart","useState","setData","selectedUser","useEffect","empty","id","data1","fetchAPI","lineChart","labels","map","item","datasets","length","label","borderColor","fill","UserPicker","selectedUserChange","FormControl","formControl","NativeSelect","defaultValue","onChange","e","target","values","i","user_id","name","UserCard","component","Card","CardContent","Avatar","alt","src","avatar_url","Typography","variant","color","start","end","nb_msg","duration","UserList","MainPage","state","count","podium","bind","this","setState","React","Component","ListPage","UserPage","App","exact","path","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.c9f552d3.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst makefunc = (url: String) => {\n    const API_URL = \"https://count-stats.herokuapp.com/api/\"; //TODO hardcoded for now\n    const func = async (args?: {\n        id?: String,\n        mind?: String,\n        maxd?: String,\n        info?: String,\n        max?: number,\n        empty?: boolean,\n        inter?: String\n    }) => {\n        let api_url = API_URL + url;\n        if (args) {\n            api_url += \"?\"\n            for (const [key, value] of Object.entries(args)) {\n                if (value) {\n                    api_url += `&${key}=${value}`\n                }\n            }\n        }\n        try {\n            console.log(`calling ${api_url}`)\n            const response = await axios.get(api_url);\n            return response.data; // TODO find a way to type this \n        } catch (error) {\n            console.log(error)\n        }\n    }\n    return func\n}\n\n// Message\n\nexport const getHistory = makefunc(\"message/history\");\nexport const getUserMsg = makefunc(\"message/usermsg\");\nexport const getDateMsg = makefunc(\"message/datemsg\");\n// export const getUserDate = makefunc(\"message/userdate\");\nexport const getMsgInfo = makefunc(\"message/msginfo\");\nexport const getMsgInter = makefunc(\"message/inter\");\nexport const getMessage = makefunc(\"message\");\n\n// users\nexport const getAllUsers = makefunc(\"user/users\");\nexport const getUser = makefunc(\"user/user\");\nexport const getUsers = makefunc(\"user\");\n\n\n\ninterface Count {\n    last_update: number[];\n    podium: {\n        top1: String;\n        top2: String;\n        top3: String;\n    };\n    count: {\n        String: number\n    }\n}\n\ninterface Message {\n    message_id: number;\n    author_id: number;\n    content: String;\n    date: number[];\n\n}\n\ninterface User {\n    avatar_url: String\n    name: String\n    discriminator: String\n    id: String\n\n}\n\ninterface Users {\n    String: User\n}\n","import React from \"react\";\nimport { Card, CardContent, Typography, Grid, Avatar } from \"@material-ui/core\";\nimport styles from \"./Cards.module.css\";\nimport CountUp from \"react-countup\";\nimport cx from \"classnames\";\nimport UserList from \"../UserList/UserList\";\nimport { UserCard } from \"..\";\n\nconst Cards = (props: any) => {\n  if (!props.users) {\n    return <h1>loading...</h1>;\n  }\n  var {\n    users,\n  } = props;\n  return (\n    <div className={styles.container}>\n      <Grid container spacing={3} justify=\"center\">\n        <UserCard\n          user={users[0]}\n          top={1}\n          className={cx(styles.card, styles.top1)}\n        />\n        <UserCard\n          user={users[1]}\n          top={2}\n          className={cx(styles.card, styles.top2)}\n        />\n        <UserCard\n          user={users[2]}\n          top={3}\n          className={cx(styles.card, styles.top3)}\n        />\n      </Grid>\n    </div>\n  );\n};\n\nexport default Cards;\n","import React, { useState, useEffect } from \"react\";\nimport { Line } from \"react-chartjs-2\";\n\nimport styles from \"./Chart.module.css\";\nimport { getMsgInter } from \"../../api\";\n\nconst Chart = (props: any) => {\n  const [data, setData] = useState(['']);\n\n  const selectedUser: String = props.selectedUser;\n\n  useEffect(() => {\n    const fetchAPI = async () => {\n      const data1 = await getMsgInter({\n        // max: 10,\n        empty: true,\n        id: selectedUser,\n      });\n      if (data1) {\n        setData(data1);\n      }\n    };\n\n    fetchAPI();\n  }, [selectedUser]); // disabled autoupdate\n\n  const lineChart = data ? (\n    <Line\n      data={{\n        labels: data?.map((item) => item[0]),\n        datasets: [\n          {\n            data: data?.map((item) => item[1]?.length),\n            label: \"messages\",\n            borderColor: \"#3333ff\",\n            fill: true,\n          },\n        ],\n      }}\n    />\n  ) : (\n    <Line\n      data={{\n        labels: [],\n        datasets: [\n          {\n            data: 0,\n            label: \"User not Found\",\n            borderColor: \"#ff0000\",\n            fill: true,\n          },\n        ],\n      }}\n    />\n  );\n\n  return <div className={styles.container}>{lineChart}</div>;\n};\n\nexport default Chart;\n","import { NativeSelect, FormControl } from \"@material-ui/core\";\n\nimport styles from \"./UserPicker.module.css\";\n\nconst UserPicker = (props: any) => {\n  const users = props.users ? props.users : {};\n  const selectedUserChange: any = props.selectedUserChange;\n\n  return (\n    <FormControl className={styles.formControl}>\n      <NativeSelect\n        defaultValue=\"\"\n        onChange={(e) => {\n          selectedUserChange(e.target.value);\n        }}\n      >\n        <option value=\"\">Global</option>\n        {Object.values(users).map((user: any, i: number) => (\n          <option key={i} value={user?.user_id}>\n            {user?.name}\n          </option>\n        ))}\n      </NativeSelect>\n    </FormControl>\n  );\n};\n\nexport default UserPicker;\n","import React from \"react\";\nimport { Card, CardContent, Typography, Grid, Avatar } from \"@material-ui/core\";\nimport styles from \"./UserCard.module.css\";\nimport CountUp from \"react-countup\";\n\nconst UserCard = (props: Props) => {\n  if (!props.user) {\n    return <h1>loading...</h1>;\n  }\n  var { user, top, className } = props;\n  return (\n    <div className={styles.container}>\n      <Grid item component={Card} className={className}>\n        <CardContent>\n          <Avatar alt={user?.name} src={user?.avatar_url} />\n          <Typography variant=\"h5\">{user?.name}</Typography>\n          <Typography color=\"textSecondary\">Top {top}</Typography>\n          <Typography variant=\"body2\">\n            <CountUp\n              start={0}\n              end={user ? user?.nb_msg : 0}\n              duration={3}\n            />{\" \"}\n            messages !\n          </Typography>\n        </CardContent>\n      </Grid>\n    </div>\n  );\n};\nexport default UserCard;\n\ntype Props = {\n  user: any;\n  top: number;\n  className?: any;\n};\n","import React from \"react\";\nimport styles from \"./UserList.module.css\";\nimport CountUp from \"react-countup\";\n\nimport UserCard from \"../UserCard/UserCard\";\n\nconst UserList = (props: Props) => {\n  if (!props.users) {\n    return <h1>loading...</h1>;\n  }\n  var { users } = props;\n  return (\n    <div className={styles.container}>\n      {users.map((user: any, i: number) => {\n        <UserCard\n          key={i}\n          user={user.name}\n          top={user.top} // FIXME\n          className={styles.card}\n        />\n\n      })}\n    </div>\n  );\n};\n\nexport default UserList;\n\ntype Props = {\n  users: any;\n};\n","import React from \"react\";\nimport styles from \"./MainPage.module.css\";\n\nimport { getUsers } from \"../../api\";\nimport { Cards, Chart, UserPicker } from \"../../components\";\n\nclass MainPage extends React.Component {\n  state = {\n    count: {},\n    podium: {},\n    users: {},\n    selectedUser: \"\",\n  };\n\n  constructor(props: any) {\n    super(props);\n    this.selectedUserChange = this.selectedUserChange.bind(this);\n  }\n\n  async componentDidMount() {\n    const users = await getUsers();\n    this.setState({ users });\n  }\n\n  async selectedUserChange(selectedUser: string) {\n    this.setState({ selectedUser: selectedUser });\n  }\n\n  render() {\n    const { users, selectedUser } = this.state;\n    return (\n      <div className={styles.container}>\n        <Cards users={users} />\n        <UserPicker\n          users={users}\n          selectedUserChange={this.selectedUserChange}\n        />\n        <Chart selectedUser={selectedUser} />\n      </div>\n    );\n  }\n}\n\nexport default MainPage;\n","import React from \"react\";\nimport { getUsers } from \"../../api\";\nimport { UserList } from \"../../components\";\n\nimport styles from \"./ListPage.module.css\";\n\nclass ListPage extends React.Component {\n  state = {\n    users: {},\n    count: {},\n    podium: {},\n  };\n\n  async componentDidMount() {\n    const users = await getUsers();\n    this.setState({ users });\n  }\n\n  render() {\n    const { users } = this.state\n    return <div className={styles.container}>\n      <UserList users={users} />\n    </div>;\n  }\n}\n\nexport default ListPage;\n\n// TODO TYPES\ntype Props = {\n  count: any;\n  podium: any;\n  users: any;\n};\n\ntype State = {\n  count: any;\n  podium: any;\n  users: any;\n  selectedUser: string;\n};\n","\nimport React from \"react\";\n\nimport styles from \"./UserPage.module.css\";\n\nclass UserPage extends React.Component <Props,State> {\n  constructor(props: Props) {\n    super(props);\n  }\n\n  render() {\n    return <h1>UsersPage</h1>;\n  }\n}\n\nexport default UserPage;\n// TODO TYPES\ntype Props = {\n  count:any,\n  podium:any,\n  users:any,\n}\n\ntype State = {\n  count:any,\n  podium:any,\n  users:any,\n  selectedUser:string\n}\n","import React from \"react\";\nimport styles from \"./app.module.css\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n} from \"react-router-dom\";\n\nimport { MainPage, ListPage, UserPage } from \"./pages\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      <Router>\n        <Switch>\n          <Route exact path=\"/\" component={MainPage} />\n          <Route path=\"/list\" component={ListPage} />\n          <Route path=\"/user\" component={UserPage} />\n        </Switch>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Cards_container__3bjn6\",\"card\":\"Cards_card__eGUfZ\",\"top1\":\"Cards_top1__27c_p\",\"top2\":\"Cards_top2__Fjdyo\",\"top3\":\"Cards_top3__3XJ72\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserList_container__2uDnd\",\"card\":\"UserList_card__1-hSm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MainPage_container__1B8k-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Chart_container__1PIOn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"UserPicker_formControl__37P4j\"};"],"sourceRoot":""}